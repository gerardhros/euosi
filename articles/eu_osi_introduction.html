<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>EU OSI introduction • euosi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="EU OSI introduction">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">euosi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/description_osi_crops_table.html">Description of osi_crops table</a></li>
    <li><a class="dropdown-item" href="../articles/eu_osi_aggregation.html">EU OSI aggregation</a></li>
    <li><a class="dropdown-item" href="../articles/eu_osi_for_acidity.html">EU OSI soil acidity</a></li>
    <li><a class="dropdown-item" href="../articles/eu_osi_for_magnesium.html">EU OSI for magnesium</a></li>
    <li><a class="dropdown-item" href="../articles/eu_osi_for_nitrogen.html">EU OSI for nitrogen</a></li>
    <li><a class="dropdown-item" href="../articles/eu_osi_for_phosphor.html">EU OSI for phosphor</a></li>
    <li><a class="dropdown-item" href="../articles/eu_osi_for_potassium.html">EU OSI for potassium</a></li>
    <li><a class="dropdown-item" href="../articles/eu_osi_introduction.html">EU OSI introduction</a></li>
    <li><a class="dropdown-item" href="../articles/eu_osi_variables.html">EU OSI variables</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>EU OSI introduction</h1>
                        <h4 data-toc-skip class="author">Gerard H
Ros</h4>
            
            <h4 data-toc-skip class="date">2025-08-18</h4>
      

      <div class="d-none name"><code>eu_osi_introduction.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The crucial role of healthy soil in achieving sustainable food
production and environment is increasingly recognized, as is the
importance of proper assessment of soil quality. Healthy soils are not
just a growing medium for crops, but they regulate and support essential
ecosystem services, such as water purification, carbon sequestration,
and nutrient cycling, and they provide habitats for biodiversity.
Improving and sustaining soil health are therefore key to sustainable
crop production. To date, many attempts have been made to develop
indices for assessing soil health, but an operational and reproducible
methodology to assess soil health has not been developed so far. There
is a broad consensus that multiple aspects of soils (e.g., chemistry,
structure, and biology) and their interactions need to be considered.
Further, various approaches have been proposed to translate soil
attributes into indicators and aggregate them into an index, including
(advanced) statistical methods and refined expert knowledge systems.
These approaches however are often highly dependent on costly soil
measures, are difficult to interpret, and not easily applicable across
spatial scales, ranging from field to regions. To overcome these
challenges, <a href="https://pubs.acs.org/doi/10.1021/acs.est.2c04516#" class="external-link">Ros et
al. (2002)</a> introduced a new soil assessment framework, being the
Open Soil Index.</p>
<p>The OSI builds on extensive soil and agronomic research to maintain a
direct link between soil health indicators and the objective to achieve
a sustainable crop production, leveraging routine laboratory data and
public databases to make its large-scale application affordable. The OSI
framework has a modular design to allow for easy adjustment and
expansion, is developed in an open-source environment (<a href="https://agrocares.github.io/Open-Bodem-Index-Calculator/" class="external-link">OBIC R
package</a>) to assure transparency, and provides advice for field-level
farming practices. In this way, OSI strives to provide an operational
soil assessment that valorizes soil health and therewith promote
sustainable soil management.</p>
<p>From 2021 onwards, soil scientists, agronomy researchers, farm
advisors and extension service providers in the Netherlands collaborated
to expand the OSI approach to include multiple ecosystem services. Where
the OSI strongly focuses on the interpretion of soil health in view of
crop production, many other ecosystem services are recognized as crucial
societal objectives that soil can contribute. Relevant soil ecosystem
services from the Sustainable Development Goals (SDGs) include not only
delivery of healthy food (SDG2 and SDG3) but also clean and sufficient
water (SDG6), the mitigation of climate (SDG13), and the support for
biodiversity and protection of land degradation (SDG15). Engaging
farmers to consider these SDGs requires extension of the framework to
include more environmental soil functions. The newly developed framework
follows the conceptual approach of the OSI and expands the soil health
assessment in view of these ecosystem services. The soil health
indicator functions can be found in the <a href="https://agrocares.github.io/BLN/" class="external-link">BLN R package</a>. This tutorial
gives a short explanation of the package focussing on the main
functionalities of the R package.</p>
<p>In 2023, Gerard Ros (WU and NMI) and Elise van den Eynde (From JRC)
discussed the possibility to expand the OSI framework to the European
scale given the need for scientific sound and standardized soil health
assessments for monitoring, policy support, and for integrative soil
recommendation systems used by farmers and farm advisors. This
ultimately led to the development of the <a href="https://gerardhros.github.io/euosi/">euosi R package</a>.</p>
</div>
<div class="section level2">
<h2 id="importing-dataset-for-research-farm">Importing dataset for research farm<a class="anchor" aria-label="anchor" href="#importing-dataset-for-research-farm"></a>
</h2>
<p>We start with some (virtual) data being collected for a farms with
fields in the Netherlands, Belgium and Finland. The preparation of this
file is described in <code>dev/osi_farm.R</code>.</p>
<p>The dataset contains soil properties from 60 agricultural fields and
is documented in <code><a href="../reference/osi_farm.html">?osi_farm</a></code>. An overview of all variables is
given below. When interested, look to the <code>summary</code> of the
<code>osi_farm</code> object.</p>
<p>More information on the input and ouput variables are documented in a
separate vignette <code><a href="../articles/eu_osi_variables.html">vignette("eu_osi_variables")</a></code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># select the data for de euosi farm</span></span>
<span><span class="va">dt.of</span> <span class="op">&lt;-</span> <span class="fu">copy</span><span class="op">(</span><span class="fu">euosi</span><span class="fu">::</span><span class="va"><a href="../reference/osi_farm.html">osi_farm</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># show the first line with all properties for a single field and latest year</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dt.of</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "ID"             "B_COUNTRY"      "B_LU"           "B_SOILTYPE_AGR"</span></span>
<span><span class="co">##  [5] "B_PREC_SUM"     "B_PREC_WIN"     "B_PET_SUM"      "B_PET_WIN"     </span></span>
<span><span class="co">##  [9] "B_TEMP_SUM"     "B_TEMP_WIN"     "A_SOM_LOI"      "A_CLAY_MI"     </span></span>
<span><span class="co">## [13] "A_SAND_MI"      "A_PH_CC"        "A_CACO3_IF"     "A_CEC_CO"      </span></span>
<span><span class="co">## [17] "A_C_OF"         "A_N_RT"         "A_N_PMN"        "A_P_OL"        </span></span>
<span><span class="co">## [21] "A_K_AAA"        "A_B_HW"         "A_ZN_CC"        "A_ZN_RT"       </span></span>
<span><span class="co">## [25] "A_MG_AAA"</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="calculate-soil-health-index-for-a-single-field">Calculate soil health index for a single field<a class="anchor" aria-label="anchor" href="#calculate-soil-health-index-for-a-single-field"></a>
</h2>
<p>Lets see how to assess the soil quality for a single field. First
select the first field given a crop rotation scheme for 4 years (the
Dutch fields). This is basically a subset of the farm and contains all
soil and field properties for the last 4 years. We subsequently use the
function <code><a href="../reference/osi_field.html">osi_field()</a></code> to calculate the different soil
indicators and soil scores. Note that the osi_farm has only the generic
input parameters. Country specific soil properties can also be used (see
<code><a href="../reference/osi_field.html">?osi_field</a></code>). These specific parameters are by default set
to NA.</p>
<p>We start with a request for the soil indicators.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># select the data for the first field of osi farm</span></span>
<span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="va">dt.of</span><span class="op">[</span><span class="va">ID</span><span class="op">==</span><span class="st">'F1'</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># calculate the OSI indicator values for that field</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">euosi</span><span class="fu">::</span><span class="fu"><a href="../reference/osi_field.html">osi_field</a></span><span class="op">(</span>B_LU <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">B_LU</span>,</span>
<span>                        B_SOILTYPE_AGR <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">B_SOILTYPE_AGR</span>,</span>
<span>                        B_COUNTRY <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">B_COUNTRY</span>, </span>
<span>                        B_BGZ <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>                        B_PREC_SUM <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">B_PREC_SUM</span>,</span>
<span>                        B_PREC_WIN <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">B_PREC_WIN</span>, </span>
<span>                        B_PET_SUM <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">B_PET_SUM</span>,</span>
<span>                        B_PET_WIN <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">B_PET_WIN</span>,</span>
<span>                        B_TEMP_SUM <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">B_TEMP_SUM</span>,</span>
<span>                        B_TEMP_WIN <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">B_TEMP_WIN</span>,</span>
<span>                        A_CLAY_MI <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_CLAY_MI</span>,</span>
<span>                        A_SAND_MI <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_SAND_MI</span>,</span>
<span>                        A_SOM_LOI <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_SOM_LOI</span>, </span>
<span>                        A_C_OF<span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_C_OF</span>,</span>
<span>                        A_CEC_CO <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_CEC_CO</span>,</span>
<span>                        A_PH_CC <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_PH_CC</span>, </span>
<span>                        A_CACO3_IF <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_CACO3_IF</span>,</span>
<span>                        A_N_RT <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_N_RT</span>,</span>
<span>                        A_N_PMN <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_N_PMN</span>,</span>
<span>                        A_P_OL <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_P_OL</span>,</span>
<span>                        A_K_AAA <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_K_AAA</span>,</span>
<span>                        A_MG_AAA <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_MG_AAA</span>, </span>
<span>                        A_B_HW <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_B_HW</span>, </span>
<span>                        A_ZN_CC <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_ZN_CC</span>, </span>
<span>                        A_ZN_EDTA <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>                        A_ZN_RT <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">A_ZN_RT</span>,</span>
<span>                        ID <span class="op">=</span> <span class="va">dt</span><span class="op">$</span><span class="va">ID</span>, </span>
<span>                        output <span class="op">=</span> <span class="st">'indicators'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># show the first line with all properties for a single field and latest year</span></span>
<span></span>
<span>  <span class="co"># format in a long table, and subset the numeric columns only</span></span>
<span>  <span class="va">dt2</span> <span class="op">&lt;-</span> <span class="fu">copy</span><span class="op">(</span><span class="va">dt</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span>  <span class="co"># select numeric values and round to two digits</span></span>
<span>  <span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dt2</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">'A_|B_PREC|B_PET|B_TEMP'</span>,<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dt2</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="va">dt2</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cols</span><span class="op">)</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">.SD</span>,<span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">x</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span>,.SDcols <span class="op">=</span> <span class="va">cols</span><span class="op">]</span></span>
<span></span>
<span>  <span class="co"># melt the data.table</span></span>
<span>  <span class="va">dt.melt1</span> <span class="op">&lt;-</span> <span class="fu">melt</span><span class="op">(</span><span class="va">dt2</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">mget</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">cols</span>,<span class="st">'ID'</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>, </span>
<span>                  id.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ID'</span><span class="op">)</span>,</span>
<span>                  variable.name <span class="op">=</span> <span class="st">'parameter'</span>, value.name <span class="op">=</span> <span class="st">'value'</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># print the table</span></span>
<span>  <span class="co"># knitr::kable(dt.melt1,caption='numerical input variables for euosi')</span></span>
<span>  </span>
<span>  <span class="co"># print the table in nicer format</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span></span>
<span>     <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">dt.melt1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,<span class="va">dt.melt1</span><span class="op">[</span><span class="fl">11</span><span class="op">:</span><span class="fl">20</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>,</span>
<span>     caption <span class="op">=</span> <span class="st">'numerical input variables for euosi.'</span>,</span>
<span>     booktabs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span> <span class="op">)</span></span></code></pre></div>
<table class="table kable_wrapper">
<caption>
numerical input variables for euosi.
</caption>
<tbody><tr>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">parameter</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">B_PREC_SUM</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">B_PREC_WIN</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">B_PET_SUM</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">B_PET_WIN</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">B_TEMP_SUM</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">B_TEMP_WIN</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">A_SOM_LOI</td>
<td align="right">4.33</td>
</tr>
<tr class="even">
<td align="left">A_CLAY_MI</td>
<td align="right">64.79</td>
</tr>
<tr class="odd">
<td align="left">A_SAND_MI</td>
<td align="right">29.57</td>
</tr>
<tr class="even">
<td align="left">A_PH_CC</td>
<td align="right">7.09</td>
</tr>
</tbody>
</table>
</td>
<td>
<table class="table">
<thead><tr class="header">
<th align="left">parameter</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A_CACO3_IF</td>
<td align="right">3.50</td>
</tr>
<tr class="even">
<td align="left">A_CEC_CO</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">A_C_OF</td>
<td align="right">21.66</td>
</tr>
<tr class="even">
<td align="left">A_N_RT</td>
<td align="right">1980.43</td>
</tr>
<tr class="odd">
<td align="left">A_N_PMN</td>
<td align="right">108.39</td>
</tr>
<tr class="even">
<td align="left">A_P_OL</td>
<td align="right">22.69</td>
</tr>
<tr class="odd">
<td align="left">A_K_AAA</td>
<td align="right">91.42</td>
</tr>
<tr class="even">
<td align="left">A_B_HW</td>
<td align="right">0.49</td>
</tr>
<tr class="odd">
<td align="left">A_ZN_CC</td>
<td align="right">17.17</td>
</tr>
<tr class="even">
<td align="left">A_ZN_RT</td>
<td align="right">57.06</td>
</tr>
</tbody>
</table>
</td>
</tr></tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># do the same for the categorial values</span></span>
<span>  </span>
<span>  <span class="co"># format in a long table, and subset the numeric columns only</span></span>
<span>  <span class="va">dt3</span> <span class="op">&lt;-</span> <span class="fu">copy</span><span class="op">(</span><span class="va">dt</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  </span>
<span>  <span class="co"># select categorial variables</span></span>
<span>  <span class="va">cols2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dt3</span><span class="op">)</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">dt3</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">cols</span><span class="op">]</span></span>
<span>  </span>
<span>  <span class="co"># convert to chracter</span></span>
<span>  <span class="va">dt3</span> <span class="op">&lt;-</span> <span class="va">dt3</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">.SD</span>,<span class="va">as.character</span><span class="op">)</span>,.SDcols <span class="op">=</span> <span class="va">cols2</span><span class="op">]</span></span>
<span>  </span>
<span>  <span class="co"># melt the data.table</span></span>
<span>  <span class="va">dt.melt2</span> <span class="op">&lt;-</span> <span class="fu">melt</span><span class="op">(</span><span class="va">dt3</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">mget</a></span><span class="op">(</span><span class="va">cols2</span><span class="op">)</span><span class="op">]</span>, </span>
<span>                  id.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ID'</span><span class="op">)</span>,</span>
<span>                  variable.name <span class="op">=</span> <span class="st">'parameter'</span>, value.name <span class="op">=</span> <span class="st">'value'</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># print the table</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">dt.melt2</span>,caption<span class="op">=</span><span class="st">'categorial input variables for euosi'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>categorial input variables for euosi</caption>
<thead><tr class="header">
<th align="left">ID</th>
<th align="left">parameter</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">F1</td>
<td align="left">B_COUNTRY</td>
<td align="left">NL</td>
</tr>
<tr class="even">
<td align="left">F1</td>
<td align="left">B_LU</td>
<td align="left">172</td>
</tr>
<tr class="odd">
<td align="left">F1</td>
<td align="left">B_SOILTYPE_AGR</td>
<td align="left">dekzand</td>
</tr>
</tbody>
</table>
<p>To simplify, one can also use a data.table as input. In that case use
the function <code>soi_field_dt()</code>. The function checks whether
all desired input variables are present. Again, the illustration below
shows the use of <code>osi_field_dt</code> to retrieve the euosi
indicators. For the interpretation of each of the soil indicators, one
can have a look at the <code><a href="../articles/eu_osi_variables.html">vignette("eu_osi_variables")</a></code></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># select the data for the first field of osi farm</span></span>
<span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="va">dt.of</span><span class="op">[</span><span class="va">ID</span><span class="op">==</span><span class="st">'F1'</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># calculate the osi indicator values</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osi_field_dt.html">osi_field_dt</a></span><span class="op">(</span><span class="va">dt</span>, output <span class="op">=</span> <span class="st">'indicators'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># print the names of the output object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "ID"              "i_b_biodiv"      "i_b_pmn"         "i_c_b"          </span></span>
<span><span class="co">##  [5] "i_c_k"           "i_c_mg"          "i_c_n"           "i_c_p"          </span></span>
<span><span class="co">##  [9] "i_c_ph"          "i_c_zn"          "i_e_carbon"      "i_e_kexcess"    </span></span>
<span><span class="co">## [13] "i_e_nleach"      "i_e_pexcess"     "i_e_watererosie" "i_p_cr"         </span></span>
<span><span class="co">## [17] "i_p_dens"        "i_p_ksat"        "i_p_paw"         "i_p_wef"        </span></span>
<span><span class="co">## [21] "i_p_whc"</span></span></code></pre>
<p>To ask for the euosi soil health scores, summarizing the contribution
of the soil to various ecosystem services, one can ask for the scores as
output. Just replace the argument output with <code>scores</code> rather
than <code>indicators</code>. It is also possible to ask for both: just
set the argument output equal to <code>all</code>, being the default
option.</p>
<p>Below we summarize the osi score for a single field. Given the
hierarchical structure of the euosi soil quality assesment, the
following scores are calculated:</p>
<ul>
<li>OSI total score (<code>s_euosi_total</code>) represents the overall
integrated soil quality assessment, where the score varies from zero
(serious bottlenecks being present) up to one (the quality is optimal
for the crop rotation plan on this field)</li>
<li>ESD crop production (<code>s_euosi_ess_prod</code>): the quality
score reflecting the ability of the soil to sustain crop production</li>
<li>ESD environment (<code>s_euosi_ess_env</code>): the quality score
reflecting the ability of the soil to contribute to a healthy
environment for air, water and biodiversity</li>
<li>ESD climate mitigation (<code>s_euosi_clim</code>): the quality
score reflecting the ability of the soil to store carbon in soil and
mitigate climate change</li>
<li>ESD nutrient cycling (<code>s_euosi_nutcycle</code>): the quality
score reflecting the ability of the soil to recycle (regional) nutrients
efficiently</li>
<li>ESD water (<code>s_euosi_water</code>): the quality score reflecting
the ability of the soil to retain and purify water leaching to ground
and surface water</li>
</ul>
<p>Besides these four ecoystem services provided by the soil, the ESS
crop production can be shown in more detail, thereby reflecting
underlying processes controlling the ESS. The ESS crop production can be
separated into the soil quality assessment in view of chemical
(<code>s_euosi_prod_c</code>), physical (<code>s_euosi_prod_p</code>)
and biological (<code>s_euosi_prod_b</code>) soil functions contributing
to the ability of soils to sustain crop production.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># calculate the OSI scoring values for ecosystem services</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/osi_field_dt.html">osi_field_dt</a></span><span class="op">(</span><span class="va">dt</span>, output <span class="op">=</span> <span class="st">'scores'</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># reformat the output in a long table</span></span>
<span><span class="va">out.melt</span> <span class="op">&lt;-</span> <span class="fu">melt</span><span class="op">(</span><span class="va">out</span>,id.vars<span class="op">=</span><span class="st">'ID'</span>,variable.name<span class="op">=</span><span class="st">'soil_ESD'</span>,value.name<span class="op">=</span><span class="st">'shi'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># set levels for the soil_ESD with a new label for the figure</span></span>
<span><span class="va">plevel</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'s_euosi_ess_env'</span>,<span class="st">'s_euosi_ess_prod'</span>,</span>
<span>           <span class="st">'s_euosi_prod_c'</span>,<span class="st">'s_euosi_prod_p'</span>,<span class="st">'s_euosi_prod_b'</span>,</span>
<span>           <span class="st">'s_euosi_clim'</span>,<span class="st">'s_euosi_water'</span>,<span class="st">'s_euosi_nutcycle'</span>,</span>
<span>           <span class="st">'s_euosi_total'</span><span class="op">)</span></span>
<span><span class="va">tlabel</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ESS environment'</span>, <span class="st">'ESS crop production'</span>,</span>
<span>           <span class="st">'crop production chemistry'</span>,<span class="st">'crop production physics'</span>,<span class="st">'crop production biology'</span>,</span>
<span>           <span class="st">'ESS climate mitigation'</span>,<span class="st">'ESS water'</span>,<span class="st">'ESS nutrient cycling'</span>,</span>
<span>           <span class="st">'EUOSI total score'</span><span class="op">)</span></span>
<span><span class="va">out.melt</span><span class="op">[</span>,<span class="va">tsoil_ESD</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">soil_ESD</span>,levels <span class="op">=</span> <span class="va">plevel</span>,labels <span class="op">=</span> <span class="va">tlabel</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># print the output object</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">out.melt</span><span class="op">[</span>,<span class="fu">.</span><span class="op">(</span><span class="va">ID</span>,ESS <span class="op">=</span> <span class="va">soil_ESD</span>,description<span class="op">=</span><span class="va">tsoil_ESD</span>,score <span class="op">=</span> <span class="va">shi</span><span class="op">)</span><span class="op">]</span>,</span>
<span>             caption<span class="op">=</span><span class="st">'OSI scores for field 1'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>OSI scores for field 1</caption>
<thead><tr class="header">
<th align="left">ID</th>
<th align="left">ESS</th>
<th align="left">description</th>
<th align="right">score</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">F1</td>
<td align="left">s_euosi_ess_env</td>
<td align="left">ESS environment</td>
<td align="right">0.92</td>
</tr>
<tr class="even">
<td align="left">F1</td>
<td align="left">s_euosi_ess_prod</td>
<td align="left">ESS crop production</td>
<td align="right">0.71</td>
</tr>
<tr class="odd">
<td align="left">F1</td>
<td align="left">s_euosi_prod_b</td>
<td align="left">crop production biology</td>
<td align="right">0.99</td>
</tr>
<tr class="even">
<td align="left">F1</td>
<td align="left">s_euosi_prod_c</td>
<td align="left">crop production chemistry</td>
<td align="right">0.58</td>
</tr>
<tr class="odd">
<td align="left">F1</td>
<td align="left">s_euosi_clim</td>
<td align="left">ESS climate mitigation</td>
<td align="right">0.88</td>
</tr>
<tr class="even">
<td align="left">F1</td>
<td align="left">s_euosi_nutcycle</td>
<td align="left">ESS nutrient cycling</td>
<td align="right">0.94</td>
</tr>
<tr class="odd">
<td align="left">F1</td>
<td align="left">s_euosi_prod_p</td>
<td align="left">crop production physics</td>
<td align="right">0.69</td>
</tr>
<tr class="even">
<td align="left">F1</td>
<td align="left">s_euosi_water</td>
<td align="left">ESS water</td>
<td align="right">0.92</td>
</tr>
<tr class="odd">
<td align="left">F1</td>
<td align="left">s_euosi_total</td>
<td align="left">EUOSI total score</td>
<td align="right">0.79</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># to show the output in a lollipop figure</span></span>
<span><span class="va">plabel</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ESS environment'</span>,<span class="st">'ESS crop\nproduction'</span>,</span>
<span>           <span class="st">'crop production\nchemistry'</span>,<span class="st">'crop production\nphysics'</span>,<span class="st">'crop production\nbiology'</span>,</span>
<span>           <span class="st">'ESS climate\nmitigation'</span>,<span class="st">'ESS water'</span>,<span class="st">'ESS nutrient\ncycling'</span>,</span>
<span>           <span class="st">'OSI total score'</span><span class="op">)</span></span>
<span><span class="va">out.melt</span><span class="op">[</span>,<span class="va">psoil_ESD</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">soil_ESD</span>,levels <span class="op">=</span> <span class="va">plevel</span>,labels <span class="op">=</span> <span class="va">plabel</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<div class="figure">
<img src="eu_osi_introduction_files/figure-html/example-1-1.png" alt="Soil health index Example for Europe." width="75%"><p class="caption">
Soil health index Example for Europe.
</p>
</div>
</div>
<div class="section level2">
<h2 id="reading-more">Reading more?<a class="anchor" aria-label="anchor" href="#reading-more"></a>
</h2>
<p>More vignettes will be made available regarding the derivation of all
soil health indicators, the aggregation methods applied, the derivation
of optimum land use given the current soil quality assessments, and the
best management practices to be applied to improve the soil quality. Are
you interested to contribute, please contact the author(s) of this R
package. Enjoy!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gerard Ros, Elise van Eynde, Sven Verweij.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
